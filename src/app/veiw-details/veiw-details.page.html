<app-application-header [config]="headerConfig">
    <ion-buttons class="button-container" header-right-content>
      <ion-button class="button" (click)="share()">
        <ion-icon name="share-social-outline" class="icon"></ion-icon>
        <span class="text">{{"SHARE" | translate}}</span>
      </ion-button>
      <ion-button class="button" (click)="download()">
        <ion-icon name="download-outline" class="icon"></ion-icon>
        <span class="text">{{"DOWNLOAD"| translate}}</span>
      </ion-button>
    </ion-buttons>
</app-application-header>

<ion-content class="ion-padding" *ngIf="viewProjectDetails">
  <div class="layout-wrapper">

  <div class="author-container ion-padding">
    <h1 class="title-header">{{viewProjectDetails.title}}</h1>
    <div class="author-text">
      @if(viewProjectDetails.author){
      <span>{{"BY" | translate}} </span>
      <span>{{viewProjectDetails.author}}</span>
      }
    </div>
  </div>

  <div class="summary-container">
    <div class="summary-head">
      <h1 class="summary-title">{{"SUMMARY" | translate}}</h1>
      <button class="summary-copy" (click)="copyText()">
        <ion-icon name="copy-outline"></ion-icon>
      </button>
    </div>
    <p class="summary-text" id="summaryText"></p>
  </div>
  
  @if(viewProjectDetails.problemStatement){
    <app-mi-details-card
        [cardConfig]="{ title: 'PROBLEM_STATEMENT', text: viewProjectDetails.problemStatement }">
    </app-mi-details-card>
  }


@if(viewProjectDetails.description){
  <app-mi-details-card 
    [cardConfig]="{ title: 'OBJECTIVE', text: viewProjectDetails.description }">
  </app-mi-details-card>
}

@if(viewProjectDetails.timeLine){
  <app-mi-details-card 
    [cardConfig]="{ title: 'TIMELINE', text: viewProjectDetails.description }">
  </app-mi-details-card>
}

@if(viewProjectDetails.tasks.length>0){
  <app-mi-details-card
    [cardConfig]="{ title: 'ACTION_STEPS', tasks: viewProjectDetails.tasks }">
  </app-mi-details-card>
}

@if(viewProjectDetails.impact){
  <app-mi-details-card 
    [cardConfig]="{ title: 'IMPACT', text: viewProjectDetails.impact }">
  </app-mi-details-card>
}

@if(viewProjectDetails.resources.length > 0){
  <div class="resource-container">
    <h1 class="resource-title">
      <ion-icon name="star"></ion-icon>
      {{"RESOURCES" | translate}}
    </h1>
    @if(resource.images.length > 0){
      <div class="resource-item">
        @for(image of resource.images;track image){
          <div class="item">
            <ion-icon name="image-outline"></ion-icon>
            <a [href]="image.downloadUrl" download="{{image.title}}">
              <span>{{image.title}}</span>
            </a>
          </div>
        }
      </div>
    }
    @if(resource.documents.length > 0){
      <ul class="resource-list">
        @for(document of resource.documents;track document){
        <li>
          <a [href]="document.filepath" download="{{document.filepath}}">
            <ion-icon name="link"></ion-icon>
            {{document.title}}
          </a>
        </li>
      }
    </ul>
    }

    @if(resource.videos.length > 0){
      <div class="resource-item">
        @for(video of resource.videos;track video){
          <div class="item">
            <ion-icon name="videocam"></ion-icon>
            <a [href]="video.filepath" download="{{video.filepath}}">
              <span>{{video.title}}</span>
            </a>
          </div>
        }
      </div>
    }
  </div>
}

<div class="bottom-container">
    @if(viewProjectDetails.text.length>0){
      <p class="bottom-text">{{viewProjectDetails.text}}</p>
    }
    @if(viewProjectDetails.evidences.length > 0){
    <div class="evidences-container">
      <h1 class="evidences-title">
        {{ "EVIDENCES"| translate }}
      </h1>
      <div class="image-container">
        @for(item of viewProjectDetails.evidences;track item){
          <div  class="image-item">
            @if(item.isImage){
              <img class="image-placeholder" [src]="item.downloadableUrl" [alt]="item.title" />
            }@else{
              <a [href]="item.downloadableUrl" target="_blank" class="file-link">{{ item.title }}</a>
            }
          </div>
        }
      </div>
    </div>
    }
</div>
  </div>
</ion-content>
